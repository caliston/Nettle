# Acorn / NetLib Makefile for Nettle
# by A. Macfarlane Smith
# (C) Archifishal Software 2001
#
# $Id$

CC = cc
CFLAGS = -c -strict -IC: -INetlib: -fa -throwback -depend !Depend -DFORTIFY #-g

LINK = link
LINKFLAGS = #-d

WIPE = wipe
WIPEFLAGS = ~CFR~V

ASM = objasm
ASMFLAGS =

OBJS = o.chardefn o.choices o.globals o.init o.lineedit o.main o.misc \
	o.nettle o.process o.quit o.seln o.socket o.wimp o.zapgen \
	o.fortify

all:	!Nettle.!RunImage

!Nettle.!RunImage:	$(OBJS)
	$(LINK) -o $@ $(LINKFLAGS) $(OBJS) C:o.stubs NetLib:o.NetLib
	squeeze $@

clean:
	$(WIPE) o.* $(WIPEFLAGS)

.SUFFIXES: .o .s .c

.s.o:
	$(ASM) $(ASMFLAGS) $< -o $@

.c.o:
	$(CC) $(CFLAGS) -o $@ $<

# Dynamic dependencies:

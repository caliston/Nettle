/**
 * Generic useful headers
 * (C) Nettle developers 2000-2001
 *
 * $Id$
 */

#ifndef GENERIC_H
#define GENERIC_H

/* Include fortify.h (Debugging) */
#include "fortify.h"

typedef enum
{
  false = 0, true = 1
} bool;

/* Standard includes */
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

/* RISC OS includes */
#include "kernel.h"
#include "swis.h"

#include <stdarg.h>

/* Compiler warning suppression */

#define NOT_USED(a) (a=a)

/* Unions/Structs */

struct coords
{
  int x, y;
};

struct coordspair
{
  struct coords tl, br;
};

struct os_spriteop_area
{
  int total_size;
  int number_of_sprites;
  int offset_to_1st_sprite;
  int offset_to_1st_free_word;
  /* Remaining data */
};

struct wimp_closewindow_block
{
  int window_handle;
};

union icon_data
{
  struct
  {
    char text[12];
  } t;

  struct
  {
    char *text;
    char *validation;
    int text_len;
  } it;

  struct
  {
    char *sprite;
    struct os_spriteop_area *sprite_area;
    int sprite_len;
  } is;
};

struct wimp_createicon_block
{
  int window_handle;
  int minx;
  int miny;
  int maxx;
  int maxy;
  int icon_flags;
  union icon_data contents;
};

struct wimp_createwindow_block
{
  int minx;
  int miny;
  int maxx;
  int maxy;
  int scroll_x;
  int scroll_y;
  int handle_behind;
  int window_flags;
  unsigned char title_fg;
  unsigned char title_bg;
  unsigned char work_fg;
  unsigned char work_bg;
  unsigned char scroll_outer_colour;
  unsigned char scroll_inner_colour;
  unsigned char title_focus_colour;
  unsigned char flags;
  int work_minx;
  int work_miny;
  int work_maxx;
  int work_maxy;
  int icon_flags;
  int workarea_flags;
  struct os_spriteop_area *sprite_area;
  unsigned short min_width;
  unsigned short min_height;
  union icon_data title;
  int number_of_icons;
  /* Icon definitions follow... */
};

struct wimp_deleteicon_block
{
  int window_handle;
  int icon_handle;
};

struct wimp_deletewindow_block
{
  int window_handle;
};

struct wimp_dragbox_block
{
  int window_handle;
  int drag_type;
  int minx;
  int miny;
  int maxx;
  int maxy;
  int parent_minx;
  int parent_miny;
  int parent_maxx;
  int parent_maxy;
  int r12_value;

  /* Maybe... */
  int *drawbox_routine;
  int *removebox_routine;
  int *movebox_routine;
};

struct wimp_getcaretposition_block
{
  int window_handle;
  int icon_handle;
  int x;
  int y;
  int height_and_flags;
  int index;
};

struct wimp_geticonstate_block
{
  int window_handle;
  int icon_handle;
  int minx;
  int miny;
  int maxx;
  int maxy;
  int icon_flags;
  union icon_data contents;
};

struct wimp_getpointerinfo_block
{
  int x;
  int y;
  int buttons;
  int window_handle;
  int icon_handle;
};

struct wimp_getwindowinfo_block
{
  int window_handle;
  int minx;
  int miny;
  int maxx;
  int maxy;
  int scroll_x;
  int scroll_y;
  int handle_behind;
  int window_flags;
  unsigned char title_fg;
  unsigned char title_bg;
  unsigned char work_fg;
  unsigned char work_bg;
  unsigned char scroll_outer_colour;
  unsigned char scroll_inner_colour;
  unsigned char title_focus_colour;
  unsigned char flags;
  int work_minx;
  int work_miny;
  int work_maxx;
  int work_maxy;
  int icon_flags;
  int workarea_flags;
  struct os_spriteop_area *sprite_area;
  unsigned short min_width;
  unsigned short min_height;
  union icon_data title;
  int number_of_icons;
  /* Icon definitions follow... */
};

struct wimp_getwindowoutline_block
{
  int window_handle;
  int minx;
  int miny;
  int maxx;
  int maxy;
};

struct wimp_getwindowstate_block
{
  int window_handle;
  int minx;
  int miny;
  int maxx;
  int maxy;
  int scroll_x;
  int scroll_y;
  int handle_behind;
  int window_flags;
};

struct wimp_openwindow_block
{
  int window_handle;
  int minx;
  int miny;
  int maxx;
  int maxy;
  int scroll_x;
  int scroll_y;
  int handle_behind;
};

struct wimp_reporterror_block
{
  int errno;
  char errmess[252];
};

struct wimp_setextent_block
{
  int minx;
  int miny;
  int maxx;
  int maxy;
};

struct wimp_seticonstate_block
{
  int window_handle;
  int icon_handle;
  int eor;
  int clear;
};

#define WIMP_ICON_TEXT_BIT       (1<<0)
#define WIMP_ICON_SPRITE_BIT     (1<<1)
#define WIMP_ICON_BORDER_BIT     (1<<2)
#define WIMP_ICON_HCENT_BIT      (1<<3)
#define WIMP_ICON_VCENT_BIT      (1<<4)
#define WIMP_ICON_FILLED_BIT     (1<<5)
#define WIMP_ICON_FONT_BIT       (1<<6)
#define WIMP_ICON_HELP_BIT       (1<<7)
#define WIMP_ICON_INDIRECTED_BIT (1<<8)
#define WIMP_ICON_RJUSTIFY_BIT   (1<<9)
#define WIMP_ICON_ADJUST_BIT     (1<<10)
#define WIMP_ICON_HALFSIZE_BIT   (1<<11)
#define WIMP_ICON_TYPE(x)        ((x)<<12)
#define WIMP_ICON_ESG(x)         ((x)<<16)
#define WIMP_ICON_SELECTED_BIT   (1<<21)
#define WIMP_ICON_SHADED_BIT     (1<<22)
#define WIMP_ICON_DELETED_BIT    (1<<23)
#define WIMP_ICON_FGCOL(x)       ((x)<<24)
#define WIMP_ICON_BGCOL(x)       ((x)<<28)
#define WIMP_ICON_FHANDLE(x)     ((x)<<24)

#define WIMP_MESSAGE_QUIT                    0
#define WIMP_MESSAGE_DATASAVEACK             2
#define WIMP_MESSAGE_MODECHANGE        0x400c1
#define WIMP_MESSAGE_TASKWINDOW_OUTPUT 0x808c1
#define WIMP_MESSAGE_TASKWINDOW_EGO    0x808c2
#define WIMP_MESSAGE_TASKWINDOW_MORIO  0x808c3


#endif

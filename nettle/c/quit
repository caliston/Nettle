/**
 * Closedown code
 * (C) Nettle developers 2000-2001
 *
 * $Id:
 */

#include "generic.h"
#include "globals.h"

#include "misc.h"
#include "nettle.h"
#include "quit.h"

void closedown_application(void)
{
  /* Quit! */

  while (sessions) {
    remove_session(sessions);
  }

  _swi(MessageTrans_CloseFile, _IN(0), messagetrans_area);

  free(message_list);
  free(bitmaps_area);
  free(messagetrans_buffer);
  free(sprite_area);
  free(zap_font_area);
  free(zap_lowres_font_area);
  free(zapredraw_area);

  close_log();

#ifdef FORTIFY
  Fortify_LeaveScope();
#endif

  _swi(Wimp_CloseDown, 0);

  exit(0);
}
